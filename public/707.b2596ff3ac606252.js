"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[707],{3583:(O,v,o)=>{o.d(v,{a:()=>A});var l=o(7700),t=o(5879),f=o(342),b=o(2939),M=o(2893),T=o(3059),h=o(1303),u=o(6814),r=o(8525),i=o(3680),n=o(2296),d=o(6223);function E(e,s){if(1&e&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&e){const a=s.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.nombre," ")}}function m(e,s){if(1&e&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&e){const a=s.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.nombre," ")}}function Z(e,s){if(1&e&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&e){const a=s.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.nombre," ")}}const g=function(){return{standalone:!0}};let A=(()=>{class e{constructor(a,p,c,C,_,D,y){this.dialogRef=a,this.data=p,this.clipboard=c,this._snackBar=C,this.bitacoraService=_,this.configService=D,this.router=y,this.herramientas="",this.tiempo="",this.causa=[],this.consecuencia=[],this.tipoReparacion=[],this.bitacora=p.bitacora,this.bitacora.causa_averia=this.bitacora.causa_averia??{},this.bitacora.consecuencia_averia=this.bitacora.consecuencia_averia??{},this.bitacora.tipo_reparacion=this.bitacora.tipo_reparacion??{},this.bitacora.herramientas??="",this.bitacora.incidencia??="",this.configService.bitacorasFinalizar().subscribe(B=>{this.causa=B.causa,this.consecuencia=B.consecuencia,this.tipoReparacion=B.tipoReparacion})}guardar(){const a=new FormData;a.append("id",""+this.bitacora.id),a.append("causa",""+this.bitacora.causa_averia.id),a.append("consecuencia",""+this.bitacora.consecuencia_averia.id),a.append("tipoReparacion",""+this.bitacora.tipo_reparacion.id),a.append("herramientas",this.bitacora.herramientas),a.append("tiempo",this.bitacora.tiempo_solucion),this.bitacoraService.finalizar(a).subscribe(p=>{console.log(p),403==p.message?this.snackBar("Falta ingresar datos"):(this.snackBar("Registro Exitoso"),this.router.navigate(["/bitacoras/list-bitacora"]))})}snackBar(a){this._snackBar.open(a,"Cerrar",{horizontalPosition:"right",verticalPosition:"top",duration:3e3})}static#t=this.\u0275fac=function(p){return new(p||e)(t.Y36(l.so),t.Y36(l.WI),t.Y36(f.TU),t.Y36(b.ux),t.Y36(M.k),t.Y36(T.E),t.Y36(h.F0))};static#a=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-end-bitacoras"]],decls:48,vars:16,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],[1,"login-danger"],["placeholder","Seleccione Causa",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Seleccione Consecuencia",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","Seleccione Tipo Rep.",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-12","col-md-6","col-xl-3"],["for","tiempo"],["name","tiempo","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6","col-xl-6"],["for","herramientas"],["name","herramientas","rows","5","cols","10",1,"form-control",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],[3,"value"]],template:function(p,c){1&p&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"form")(8,"div",2)(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"Causa de Averia "),t.TgZ(13,"span",8),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"mat-select",9),t.NdJ("ngModelChange",function(_){return c.bitacora.causa_averia.id=_}),t.YNc(16,E,2,2,"mat-option",10),t.qZA()()(),t.TgZ(17,"div",6)(18,"div",7)(19,"label"),t._uU(20,"Consecuencia Averia "),t.TgZ(21,"span",8),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"mat-select",11),t.NdJ("ngModelChange",function(_){return c.bitacora.consecuencia_averia.id=_}),t.YNc(24,m,2,2,"mat-option",10),t.qZA()()(),t.TgZ(25,"div",6)(26,"div",7)(27,"label"),t._uU(28,"Tipo de Reparaci\xf3n"),t.TgZ(29,"span",8),t._uU(30,"*"),t.qZA()(),t.TgZ(31,"mat-select",12),t.NdJ("ngModelChange",function(_){return c.bitacora.tipo_reparacion.id=_}),t.YNc(32,Z,2,2,"mat-option",10),t.qZA()()(),t.TgZ(33,"div",13)(34,"div",7)(35,"label",14),t._uU(36,"Tiempo atenci\xf3n "),t.qZA(),t.TgZ(37,"input",15),t.NdJ("ngModelChange",function(_){return c.bitacora.tiempo_solucion=_}),t.qZA()()(),t.TgZ(38,"div",16)(39,"div",7)(40,"label",17),t._uU(41,"Material Utilizado "),t.qZA(),t.TgZ(42,"textarea",18),t.NdJ("ngModelChange",function(_){return c.bitacora.herramientas=_}),t.qZA()()()()()()()()()(),t.TgZ(43,"mat-dialog-actions",19)(44,"button",20),t._uU(45,"Cerrar"),t.qZA(),t.TgZ(46,"button",21),t.NdJ("click",function(){return c.guardar()}),t._uU(47,"Guardar"),t.qZA()()),2&p&&(t.xp6(1),t.hij("Finalizar Bitacora: ",c.bitacora.nombre,""),t.xp6(14),t.Q6J("ngModel",c.bitacora.causa_averia.id)("ngModelOptions",t.DdM(13,g)),t.xp6(1),t.Q6J("ngForOf",c.causa),t.xp6(7),t.Q6J("ngModel",c.bitacora.consecuencia_averia.id)("ngModelOptions",t.DdM(14,g)),t.xp6(1),t.Q6J("ngForOf",c.consecuencia),t.xp6(7),t.Q6J("ngModel",c.bitacora.tipo_reparacion.id)("ngModelOptions",t.DdM(15,g)),t.xp6(1),t.Q6J("ngForOf",c.tipoReparacion),t.xp6(5),t.Q6J("ngModel",c.bitacora.tiempo_solucion),t.xp6(5),t.Q6J("ngModel",c.bitacora.herramientas),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[u.sg,r.gD,i.ey,n.lW,l.ZT,l.uh,l.xY,l.H8,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F]})}return e})()},9909:(O,v,o)=>{o.d(v,{D:()=>Z});var l=o(7700),t=o(5879),f=o(342),b=o(2939),M=o(2893),T=o(3059),h=o(9368),u=o(2122),r=o(9862),i=o(3586);let n=(()=>{class g extends h.p{constructor(e,s){super(e,s,"sites"),this.http=e,this.authService=s}showProvinciasDep(e){const s=this.getHeaders();return this.http.get(`${u.$g}/provinciasdep/${e}`,{headers:s})}showDistritoProv(e){const s=this.getHeaders();return this.http.get(`${u.$g}/distritoprov/${e}`,{headers:s})}createLocationBitacora(e){const s=this.getHeaders();return this.http.post(`${u.$g}/bitacoras/localizacion`,e,{headers:s})}static#t=this.\u0275fac=function(s){return new(s||g)(t.LFG(r.eN),t.LFG(i.e))};static#a=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})();var d=o(1303),E=o(2296),m=o(6223);let Z=(()=>{class g{constructor(e,s,a,p,c,C,_,D){this.dialogRef=e,this.data=s,this.clipboard=a,this._snackBar=p,this.bitacoraService=c,this.configService=C,this.locationService=_,this.router=D,this.herramientas="",this.tiempo="",this.causa=[],this.consecuencia=[],this.tipoReparacion=[],this.bitacora=s.bitacora,this.configService.bitacorasFinalizar().subscribe(y=>{this.causa=y.causa,this.consecuencia=y.consecuencia,this.tipoReparacion=y.tipoReparacion})}guardar(){console.log(this.bitacora),this.locationService.createLocationBitacora(this.bitacora).subscribe(e=>{403==e.message?this.snackBar("Falta ingresar datos"):(this.snackBar("Registro Exitoso"),this.router.navigate(["/bitacoras/list-bitacora"]))})}snackBar(e){this._snackBar.open(e,"Cerrar",{horizontalPosition:"right",verticalPosition:"top",duration:3e3})}getLocation(){this.bitacoraService.getPosition().then(e=>{this.bitacora.latitud=e.lat,this.bitacora.longitud=e.lng})}static#t=this.\u0275fac=function(s){return new(s||g)(t.Y36(l.so),t.Y36(l.WI),t.Y36(f.TU),t.Y36(b.ux),t.Y36(M.k),t.Y36(T.E),t.Y36(n),t.Y36(d.F0))};static#a=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-location-bitacoras"]],decls:34,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"col-12","col-md-6","col-xl-3"],[1,"form-group","local-forms"],["for","latitud"],["name","latitud","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","longitud"],["name","longitud","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","distancia"],["name","distancia","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","ms-1"],["aria-hidden","true",1,"fas","fa-map-marker-alt",3,"click"],["target","_blank",1,"btn","btn-primary","ms-1",3,"href"],["aria-hidden","true",1,"fa","fa-map",3,"click"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(s,a){1&s&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"form")(8,"div",2)(9,"div",6)(10,"div",7)(11,"label",8),t._uU(12,"Latitud "),t.qZA(),t.TgZ(13,"input",9),t.NdJ("ngModelChange",function(c){return a.bitacora.latitud=c}),t.qZA()()(),t.TgZ(14,"div",6)(15,"div",7)(16,"label",10),t._uU(17,"Longitud "),t.qZA(),t.TgZ(18,"input",11),t.NdJ("ngModelChange",function(c){return a.bitacora.longitud=c}),t.qZA()()(),t.TgZ(19,"div",6)(20,"div",7)(21,"label",12),t._uU(22,"Distancia"),t.qZA(),t.TgZ(23,"input",13),t.NdJ("ngModelChange",function(c){return a.bitacora.distancia=c}),t.qZA()()(),t.TgZ(24,"div",6)(25,"button",14)(26,"i",15),t.NdJ("click",function(){return a.getLocation()}),t.qZA()(),t.TgZ(27,"a",16)(28,"i",17),t.NdJ("click",function(){return a.getLocation()}),t.qZA()()()()()()()()()(),t.TgZ(29,"mat-dialog-actions",18)(30,"button",19),t._uU(31,"Cerrar"),t.qZA(),t.TgZ(32,"button",20),t.NdJ("click",function(){return a.guardar()}),t._uU(33,"Guardar"),t.qZA()()),2&s&&(t.xp6(1),t.hij("Ubicaci\xf3n de: ",a.bitacora.nombre,""),t.xp6(12),t.Q6J("ngModel",a.bitacora.latitud),t.xp6(5),t.Q6J("ngModel",a.bitacora.longitud),t.xp6(5),t.Q6J("ngModel",a.bitacora.distancia),t.xp6(4),t.hYB("href","https://www.google.com/maps/search/?api=1&query=",a.bitacora.latitud,",",a.bitacora.longitud,"",t.LSH),t.xp6(5),t.Q6J("mat-dialog-close",!0))},dependencies:[E.lW,l.ZT,l.uh,l.xY,l.H8,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.On,m.F]})}return g})()},2893:(O,v,o)=>{o.d(v,{k:()=>T});var l=o(2122),t=o(9368),f=o(5879),b=o(9862),M=o(3586);let T=(()=>{class h extends t.p{constructor(r,i){super(r,i,"bitacoras"),this.http=r,this.authService=i}createAtencionBitacora(r){const i=this.getHeaders();return this.http.post(`${l.$g}/${this.endpoint}/atenciones`,r,{headers:i})}finalizar(r){const i=this.getHeaders();return this.http.post(`${l.$g}/${this.endpoint}/finalizar`,r,{headers:i})}listAtencion(r){const i=this.getHeaders();return this.http.get(`${l.$g}/${this.endpoint}/atencion/${r}`,{headers:i})}getPosition(){return new Promise((r,i)=>{navigator.geolocation.getCurrentPosition(n=>{r({lng:n.coords.longitude,lat:n.coords.latitude})},n=>{i(n)})})}static#t=this.\u0275fac=function(i){return new(i||h)(f.LFG(b.eN),f.LFG(M.e))};static#a=this.\u0275prov=f.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},342:(O,v,o)=>{o.d(v,{TU:()=>b});var l=o(6814),t=o(5879);class f{constructor(r,i){this._document=i;const n=this._textarea=this._document.createElement("textarea"),d=n.style;d.position="fixed",d.top=d.opacity="0",d.left="-999em",n.setAttribute("aria-hidden","true"),n.value=r,n.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(n)}copy(){const r=this._textarea;let i=!1;try{if(r){const n=this._document.activeElement;r.select(),r.setSelectionRange(0,r.value.length),i=this._document.execCommand("copy"),n&&n.focus()}}catch{}return i}destroy(){const r=this._textarea;r&&(r.remove(),this._textarea=void 0)}}let b=(()=>{class u{constructor(i){this._document=i}copy(i){const n=this.beginCopy(i),d=n.copy();return n.destroy(),d}beginCopy(i){return new f(i,this._document)}static#t=this.\u0275fac=function(n){return new(n||u)(t.LFG(l.K0))};static#a=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);