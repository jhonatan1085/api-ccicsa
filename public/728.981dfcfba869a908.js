"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[728],{7728:(C,c,e)=>{e.r(c),e.d(c,{LoginModule:()=>U});var d=e(6814),g=e(1303),n=e(6223),f=e(685),o=e(5879),p=e(3586);function v(t,_){1&t&&(o.TgZ(0,"div"),o._uU(1," Email is required. "),o.qZA())}function h(t,_){1&t&&(o.TgZ(0,"div"),o._uU(1," Please, enter valid email address. "),o.qZA())}function L(t,_){if(1&t&&(o.TgZ(0,"div",27),o.YNc(1,v,2,0,"div",28),o.YNc(2,h,2,0,"div",28),o.qZA()),2&t){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.f.email.errors&&i.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",i.f.email.errors&&i.f.email.errors.email)}}function u(t,_){1&t&&(o.TgZ(0,"div"),o._uU(1," Password is required. "),o.qZA())}function Z(t,_){if(1&t&&(o.TgZ(0,"div",27),o.YNc(1,u,2,0,"div",28),o.qZA()),2&t){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.f.password.errors&&i.f.password.errors.required)}}function r(t,_){1&t&&(o.TgZ(0,"div",29)(1,"strong"),o._uU(2,"Error!"),o.qZA(),o._uU(3,"El usuario y/o contrase\xf1a son incorrectos. "),o.TgZ(4,"button",30),o._UZ(5,"span",31),o.qZA()())}const l=function(t){return{"is-invalid":t}},m=[{path:"",component:(()=>{class t{get f(){return this.form.controls}constructor(i,a){this.auth=i,this.router=a,this.routes=f._,this.passwordClass=!1,this.ERROR=!1,this.form=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email]),password:new n.NI("",[n.kI.required])})}loginFormSubmit(){this.form.valid&&(this.ERROR=!1,this.auth.login(this.form.value.email??"",this.form.value.password??"").subscribe({next:i=>{console.log(i),i?this.router.navigate([f._.adminDashboard]):this.ERROR=!0},error:i=>{console.log(i)}}))}togglePassword(){this.passwordClass=!this.passwordClass}static#o=this.\u0275fac=function(a){return new(a||t)(o.Y36(p.e),o.Y36(g.F0))};static#t=this.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:37,vars:14,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-03.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],[3,"routerLink"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Email"],[1,"login-danger"],["formControlName","email","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","Password"],["formControlName","password",1,"form-control","pass-input",3,"type","ngClass"],["tabindex","0",1,"profile-views","toggle-password",3,"ngClass","click","keyup.enter"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"]],template:function(a,s){1&a&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),o._UZ(6,"img",6),o.qZA()()(),o.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"a",13),o._UZ(14,"img",14),o.qZA()(),o.TgZ(15,"h2"),o._uU(16,"Login"),o.qZA(),o.TgZ(17,"form",15),o.NdJ("ngSubmit",function(){return s.loginFormSubmit()}),o.TgZ(18,"div",16)(19,"label",17),o._uU(20,"Email "),o.TgZ(21,"span",18),o._uU(22,"*"),o.qZA()(),o._UZ(23,"input",19),o.YNc(24,L,3,2,"div",20),o.qZA(),o.TgZ(25,"div",16)(26,"label",21),o._uU(27,"Password "),o.TgZ(28,"span",18),o._uU(29,"*"),o.qZA()(),o._UZ(30,"input",22),o.YNc(31,Z,2,1,"div",20),o.TgZ(32,"span",23),o.NdJ("click",function(){return s.togglePassword()})("keyup.enter",function(){return s.togglePassword()}),o.qZA()(),o.YNc(33,r,6,0,"div",24),o.TgZ(34,"div",25)(35,"button",26),o._uU(36," Login "),o.qZA()()()()()()()()()()()),2&a&&(o.xp6(13),o.Q6J("routerLink",s.routes.adminDashboard),o.xp6(4),o.Q6J("formGroup",s.form),o.xp6(6),o.Q6J("ngClass",o.VKq(10,l,s.f.email.touched&&s.f.email.invalid)),o.xp6(1),o.Q6J("ngIf",s.f.email.touched&&s.f.email.invalid),o.xp6(6),o.Q6J("type",s.passwordClass?"text":"password")("ngClass",o.VKq(12,l,s.f.password.touched&&s.f.password.invalid)),o.xp6(1),o.Q6J("ngIf",s.f.password.touched&&s.f.password.invalid),o.xp6(1),o.Q6J("ngClass",s.passwordClass?"feather icon-eye":"feather icon-eye-off"),o.xp6(1),o.Q6J("ngIf",s.ERROR),o.xp6(2),o.Q6J("disabled",s.form.invalid))},dependencies:[d.mk,d.O5,g.rH,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return t})()}];let I=(()=>{class t{static#o=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=o.oAB({type:t});static#e=this.\u0275inj=o.cJS({imports:[g.Bz.forChild(m),g.Bz]})}return t})();var R=e(15);let U=(()=>{class t{static#o=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=o.oAB({type:t});static#e=this.\u0275inj=o.cJS({imports:[d.ez,I,R.m]})}return t})()},2122:(C,c,e)=>{e.d(c,{$g:()=>n});const{URL_SERVICIOS:n}={production:!0,URL_BACKEND:"http://cicsamrd.com",URL_SERVICIOS:"http://cicsamrd.com/api",URL_FRONTEND:"http://cicsamrd.com/"}},3586:(C,c,e)=>{e.d(c,{e:()=>L});var d=e(685),g=e(2122),n=e(7398),f=e(6306),o=e(2096),p=e(5879),v=e(1303),h=e(9862);let L=(()=>{class u{constructor(r,l){this.router=r,this.http=l,this.getLocalStorage()}getLocalStorage(){if(localStorage.getItem("token")&&localStorage.getItem("user")){const r=localStorage.getItem("user");this.user=JSON.parse(r||""),this.token=localStorage.getItem("token")??void 0}else this.user=void 0,this.token=void 0;console.log(this.user,this.token)}login(r,l){return this.http.post(g.$g+"/auth/login",{email:r,password:l}).pipe((0,n.U)(m=>(console.log(m),this.saveLocalStorage(m))),(0,f.K)(m=>(console.log(m),(0,o.of)(void 0))))}saveLocalStorage(r){return!(!r||!r.access_token||(localStorage.setItem("token",r.access_token),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("authenticated","true"),0))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authenticated"),this.router.navigate([d._.login])}static#o=this.\u0275fac=function(l){return new(l||u)(p.LFG(v.F0),p.LFG(h.eN))};static#t=this.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);