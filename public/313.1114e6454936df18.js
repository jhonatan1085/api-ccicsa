"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[313],{5313:(je,he,u)=>{u.d(he,{by:()=>ze}),u(5879),u(9388);var v=u(2495),_=u(8337),L=(u(2831),u(6672),u(6814),u(8645)),M=(u(9666),u(5619)),T=(u(2664),u(2096));u(9773),u(8180);var ne=u(3019),V=u(2572),Q=u(7398);class Ye extends _.o2{get data(){return this._data.value}set data(a){a=Array.isArray(a)?a:[],this._data.next(a),this._renderChangesSubscription||this._filterData(a)}get filter(){return this._filter.value}set filter(a){this._filter.next(a),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(a){this._sort=a,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(a){this._paginator=a,this._updateChangeSubscription()}constructor(a=[]){super(),this._renderData=new M.X([]),this._filter=new M.X(""),this._internalPageChanges=new L.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,o)=>{const n=e[o];if((0,v.t6)(n)){const i=Number(n);return i<9007199254740991?i:n}return n},this.sortData=(e,o)=>{const n=o.active,i=o.direction;return n&&""!=i?e.sort((r,l)=>{let c=this.sortingDataAccessor(r,n),f=this.sortingDataAccessor(l,n);const d=typeof c,m=typeof f;d!==m&&("number"===d&&(c+=""),"number"===m&&(f+=""));let h=0;return null!=c&&null!=f?c>f?h=1:c<f&&(h=-1):null!=c?h=1:null!=f&&(h=-1),h*("asc"==i?1:-1)}):e},this.filterPredicate=(e,o)=>{const n=Object.keys(e).reduce((r,l)=>r+e[l]+"\u25ec","").toLowerCase(),i=o.trim().toLowerCase();return-1!=n.indexOf(i)},this._data=new M.X(a),this._updateChangeSubscription()}_updateChangeSubscription(){const a=this._sort?(0,ne.T)(this._sort.sortChange,this._sort.initialized):(0,T.of)(null),e=this._paginator?(0,ne.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,T.of)(null),n=(0,V.a)([this._data,this._filter]).pipe((0,Q.U)(([l])=>this._filterData(l))),i=(0,V.a)([n,a]).pipe((0,Q.U)(([l])=>this._orderData(l))),r=(0,V.a)([i,e]).pipe((0,Q.U)(([l])=>this._pageData(l)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=r.subscribe(l=>this._renderData.next(l))}_filterData(a){return this.filteredData=null==this.filter||""===this.filter?a:a.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(a){return this.sort?this.sortData(a.slice(),this.sort):a}_pageData(a){if(!this.paginator)return a;const e=this.paginator.pageIndex*this.paginator.pageSize;return a.slice(e,e+this.paginator.pageSize)}_updatePaginator(a){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=a,e.pageIndex>0)){const o=Math.ceil(e.length/e.pageSize)-1||0,n=Math.min(e.pageIndex,o);n!==e.pageIndex&&(e.pageIndex=n,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}class ze extends Ye{}}}]);