"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[935],{7935:(K,m,n)=>{n.r(m),n.d(m,{UnidadesMovilesModule:()=>B});var g=n(6814),d=n(1303),t=n(5879);let _=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-unidades-moviles"]],decls:1,vars:0,template:function(o,a){1&o&&t._UZ(0,"router-outlet")},dependencies:[d.lC]})}return i})();var f=n(5313),Z=n(3583),b=n(9909),r=n(6223),T=n(3059),A=n(1043),U=n(8525),C=n(3680),x=n(2296),u=n(7700);let M=(()=>{class i{constructor(e,o){this.configService=e,this.fb=o,this.colores=[],this.marcas=[],this.modelos=[],this.datosForm=this.fb.group({marca:[null,r.kI.required],modelo:[null,r.kI.required],color:[null,r.kI.required],placa:[null,r.kI.required],kilometraje:[null,r.kI.required]})}ngOnInit(){this.getConfigBitacora()}getConfigBitacora(){this.configService.unidadesMoviles().subscribe(e=>{this.colores=e.colores,this.marcas=e.marcas,this.modelos=e.modelos})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(T.E),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-unidades-moviles"]],decls:63,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"row","align-items-center",3,"formGroup"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],["for","selectedRed"],[1,"login-danger"],["formControlName","marca","placeholder","Selec. Marca",1,"form-control","select"],["formControlName","modelo","placeholder","Selec. Modelo",1,"form-control","select"],["formControlName","color","placeholder","Selec. Color",1,"form-control","select"],["for","placa"],["formControlName","placa","name","placa","type","text",1,"form-control"],["for","kilometraje"],["formControlName","kilometraje","name","kilometraje","type","number",1,"form-control"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,a){1&o&&(t.TgZ(0,"h2",0),t._uU(1,"Unidad Movil "),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"form")(8,"div",6)(9,"div",7)(10,"div",8)(11,"h4"),t._uU(12,"Agregar Bitacora"),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"mat-label",11),t._uU(16,"Marca "),t.TgZ(17,"span",12),t._uU(18,"*"),t.qZA()(),t.TgZ(19,"mat-select",13)(20,"mat-option"),t._uU(21,"Toyota"),t.qZA(),t.TgZ(22,"mat-option"),t._uU(23,"Nissan"),t.qZA()()()(),t.TgZ(24,"div",9)(25,"div",10)(26,"mat-label",11),t._uU(27,"Modelo "),t.TgZ(28,"span",12),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"mat-select",14)(31,"mat-option"),t._uU(32,"Hilux"),t.qZA(),t.TgZ(33,"mat-option"),t._uU(34,"NP-300"),t.qZA()()()(),t.TgZ(35,"div",9)(36,"div",10)(37,"mat-label",11),t._uU(38,"Color "),t.TgZ(39,"span",12),t._uU(40,"*"),t.qZA()(),t.TgZ(41,"mat-select",15)(42,"mat-option"),t._uU(43,"Blanco"),t.qZA(),t.TgZ(44,"mat-option"),t._uU(45,"Rojo"),t.qZA(),t.TgZ(46,"mat-option"),t._uU(47,"Azul"),t.qZA()()()(),t.TgZ(48,"div",9)(49,"div",10)(50,"mat-label",16),t._uU(51,"Placa "),t.qZA(),t._UZ(52,"input",17),t.qZA()(),t.TgZ(53,"div",9)(54,"div",10)(55,"mat-label",18),t._uU(56,"Kilometraje "),t.qZA(),t._UZ(57,"input",19),t.qZA()()()()()()()()(),t.TgZ(58,"mat-dialog-actions",20)(59,"button",21),t._uU(60,"Cerrar"),t.qZA(),t.TgZ(61,"button",22),t._uU(62,"Guardar"),t.qZA()()),2&o&&(t.xp6(8),t.Q6J("formGroup",a.datosForm),t.xp6(53),t.Q6J("mat-dialog-close",!0))},dependencies:[A.hX,U.gD,C.ey,x.lW,u.ZT,u.uh,u.xY,u.H8,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.F,r.sg,r.u]})}return i})();var y=n(2893),k=n(3586),p=n(3566),h=n(2596);const q=function(i){return["/bitacoras/edit-bitacora/",i]};function P(i,c){if(1&i&&(t.TgZ(0,"button",46),t._UZ(1,"i",52),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("disabled","0"===e.estado)("routerLink",t.VKq(2,q,e.id))}}const N=function(i,c){return{"status-red":i,"status-green":c}},J=function(i){return["/bitacoras/list-bitacora/detalle-bitacora/",i]};function D(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",43),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"a",44),t._uU(17),t.qZA()(),t.TgZ(18,"td",45)(19,"button",46),t._UZ(20,"i",47),t.qZA(),t.TgZ(21,"button",48)(22,"i",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openDialogLocation(s))}),t.qZA()(),t.TgZ(23,"button",48)(24,"i",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openDialogEnd(s))}),t.qZA()(),t.YNc(25,P,2,4,"button",51),t.qZA()()}if(2&i){const e=c.$implicit,o=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.nombre),t.xp6(1),t.hij(" ",e.nombre," "),t.xp6(2),t.Oqu(e.fecha_inicial),t.xp6(2),t.Oqu(e.sot),t.xp6(2),t.Oqu(e.incidencia),t.xp6(2),t.Oqu(e.tipo_averia.nombre),t.xp6(2),t.Oqu(e.red.nombre),t.xp6(2),t.Oqu(e.serv.nombre),t.xp6(2),t.Q6J("ngClass",t.WLB(15,N,"1"===e.estado,"0"===e.estado)),t.xp6(1),t.Oqu(e.estadotext),t.xp6(2),t.Q6J("disabled","0"===e.estado)("routerLink",t.VKq(18,J,e.id)),t.xp6(2),t.Q6J("disabled","0"===e.estado),t.xp6(2),t.Q6J("disabled","0"===e.estado),t.xp6(2),t.Q6J("ngIf","Tecnico"!==(null==o.user||null==o.user.roles?null:o.user.roles[0]))}}function L(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage-2))})("keyup.enter",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage-2))}),t.TgZ(1,"a",55),t._uU(2," ... "),t.qZA()()}if(2&i){const e=t.oxw(2);t.Q6J("hidden",1===e.currentPage)}}function S(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage+2))})("keyup.enter",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage+2))}),t.TgZ(1,"a",55),t._uU(2," ... "),t.qZA()()}if(2&i){const e=t.oxw(2);t.Q6J("hidden",e.currentPage>=e.pageNumberArray[e.pageNumberArray.length-2]||e.totalData<e.serialNumberArray[e.serialNumberArray.length-1])}}function F(i,c){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",40)(2,"a",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.moveToPage(s))}),t._uU(3),t.qZA()(),t.YNc(4,L,3,1,"li",53),t.YNc(5,S,3,1,"li",53),t.BQk()}if(2&i){const e=c.$implicit,o=c.index,a=t.oxw();t.xp6(1),t.ekj("active",e===a.currentPage),t.Q6J("ngClass",a.pageNumberArray[a.currentPage-2]>e&&1!==e&&a.pageNumberArray.length>6||a.pageNumberArray[a.currentPage]<e&&1!==e&&a.pageNumberArray.length>6&&a.pageNumberArray.length!==e?"hide-page-no":"show-page-no"),t.xp6(2),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",0===o&&a.pageNumberArray.length>6&&a.currentPage>2),t.xp6(1),t.Q6J("ngIf",o===a.pageNumberArray.length-2&&a.pageNumberArray.length>6)}}const v=function(i){return{disabled:i}},I=[{path:"",component:_,children:[{path:"list-unidades-moviles",component:(()=>{class i{constructor(e,o,a){this.bitacoraService=e,this.dialog=o,this.auth=a,this.bitacoras=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.bitacora_generals=[]}ngOnInit(){this.user=this.auth.user,console.log(this.user),this.getTableData()}getTableData(e=1){this.serialNumberArray=[],this.bitacoraService.readAll({page:e,search:this.searchDataValue}).subscribe(o=>{console.log(o),this.totalData=o.total,this.bitacoras=o.data,this.dataSource=new f.by(this.bitacoras),this.calculateTotalPages(this.totalData,this.pageSize)})}searchData(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}sortData(e){const o=this.bitacoras.slice();this.bitacoras=e.active&&""!==e.direction?o.sort((a,s)=>(a[e.active]<s[e.active]?-1:1)*("asc"===e.direction?1:-1)):o}getMoreData(e){"next"==e?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage)):"previous"==e&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage))}moveToPage(e){this.currentPage=e,this.skip=this.pageSelection[e-1].skip,this.limit=this.pageSelection[e-1].limit,e>this.currentPage?this.pageIndex=e-1:e<this.currentPage&&(this.pageIndex=e+1),this.getTableData(this.currentPage)}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.getTableData()}calculateTotalPages(e,o){this.pageNumberArray=[],this.totalPages=e/o,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var a=1;a<=this.totalPages;a++){const s=o*a,l=s-o;this.pageNumberArray.push(a),this.pageSelection.push({skip:l,limit:s})}}openDialog(){this.dialog.open(M).afterClosed().subscribe(()=>this.getTableData())}openDialogEnd(e){this.dialog.open(Z.a,{data:{bitacora:e}})}openDialogLocation(e){this.dialog.open(b.D,{data:{bitacora:e}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(y.k),t.Y36(u.uw),t.Y36(k.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-unidades-moviles"]],decls:68,vars:12,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],[1,"btn","btn-primary","ms-2",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","nombre",1,"col-sm-4"],["mat-sort-header","fecha_inicial"],["mat-sort-header","sot"],["mat-sort-header","incidencia"],["mat-sort-header","tipo_averia"],["mat-sort-header","estado"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section","mx-2"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[2,"max-width","24rem","text-overflow","ellipsis","white-space","nowrap","overflow","hidden",3,"matTooltip"],[1,"custom-badge",3,"ngClass"],[1,"text-end"],[1,"btn","btn-primary","ms-1",3,"disabled","routerLink"],[1,"fa","fa-clock"],[1,"btn","btn-primary","ms-1",3,"disabled"],["aria-hidden","true",1,"fas","fa-map-marker-alt",3,"click"],["aria-hidden","true",1,"fa","fa-check",3,"click"],["class","btn btn-primary ms-1",3,"disabled","routerLink",4,"ngIf"],[1,"fa","fa-pencil"],["class","page-item","tabindex","0",3,"hidden","click","keyup.enter",4,"ngIf"],["tabindex","0",1,"page-item",3,"hidden","click","keyup.enter"],["href","javascript:void(0);",1,"page-link"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Bitacoras "),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12,"Lista de Bitacoras"),t.qZA()()()()(),t.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h3"),t._uU(22,"Listado de Bitacoras"),t.qZA(),t.TgZ(23,"div",16)(24,"div",17)(25,"input",18),t.NdJ("ngModelChange",function(l){return a.searchDataValue=l})("keyup.enter",function(){return a.searchData()}),t.qZA(),t.TgZ(26,"a",19),t._UZ(27,"img",20),t.qZA()(),t.TgZ(28,"div",21)(29,"button",22),t.NdJ("click",function(){return a.openDialog()}),t._UZ(30,"i",23),t.qZA(),t.TgZ(31,"button",22),t.NdJ("click",function(){return a.PageSize()}),t._UZ(32,"i",24),t.qZA()()()()()()(),t.TgZ(33,"div",25)(34,"table",26),t.NdJ("matSortChange",function(l){return a.sortData(l)}),t.TgZ(35,"thead")(36,"tr")(37,"th",27),t._uU(38,"placa"),t.qZA(),t.TgZ(39,"th",28),t._uU(40,"Kilometraje"),t.qZA(),t.TgZ(41,"th",29),t._uU(42,"Marca"),t.qZA(),t.TgZ(43,"th",30),t._uU(44,"Modelo"),t.qZA(),t.TgZ(45,"th",31),t._uU(46,"Color"),t.qZA(),t.TgZ(47,"th",32),t._uU(48,"Estado"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Acci\xf3n"),t.qZA(),t._UZ(51,"th"),t.qZA()(),t.TgZ(52,"tbody"),t.YNc(53,D,26,20,"tr",33),t.qZA()(),t.TgZ(54,"div",34)(55,"div",35)(56,"div",36),t._uU(57),t.qZA()(),t.TgZ(58,"div",37)(59,"div",38)(60,"ul",39)(61,"li",40)(62,"a",41),t.NdJ("click",function(){return a.getMoreData("previous")}),t._uU(63,"Anterior"),t.qZA()(),t.YNc(64,F,6,6,"ng-container",33),t.TgZ(65,"li",40)(66,"a",42),t.NdJ("click",function(){return a.getMoreData("next")}),t._uU(67,"Siguiente "),t.qZA()()()()()()()()()()()()()),2&o&&(t.xp6(25),t.Q6J("ngModel",a.searchDataValue),t.xp6(28),t.Q6J("ngForOf",a.bitacoras),t.xp6(4),t.lnq(" Mostrando ",a.serialNumberArray[0]," a ",a.serialNumberArray[a.serialNumberArray.length-1]," de ",a.totalData," bitacoras "),t.xp6(4),t.Q6J("ngClass",t.VKq(8,v,1===a.currentPage)),t.xp6(3),t.Q6J("ngForOf",a.pageNumberArray),t.xp6(1),t.Q6J("ngClass",t.VKq(10,v,a.currentPage===a.pageNumberArray[a.pageNumberArray.length-1]||0===a.bitacoras.length)))},dependencies:[g.mk,g.sg,g.O5,d.rH,r.Fj,r.JJ,r.On,p.YE,p.nU,h.gM]})}return i})()}]}];let Q=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#a=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(I),d.Bz]})}return i})();var j=n(15),w=n(9862),z=n(6736);let B=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#a=this.\u0275inj=t.cJS({imports:[g.ez,Q,j.m,z.q,r.u5,r.UX,w.JF,d.Bz,h.AV]})}return i})()}}]);